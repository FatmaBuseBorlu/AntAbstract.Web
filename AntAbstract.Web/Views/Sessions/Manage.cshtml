@model AntAbstract.Web.Models.ViewModels.SessionManageViewModel

@{
    ViewData["Title"] = "Oturum Programını Yönet";
}

<h1 class="display-5">@ViewData["Title"]</h1>
<h4 class="text-muted fw-light">Oturum: @Model.Session.Title</h4>
<hr />

<div class="row g-4">

    <div class="col-md-6">
        <div class="card shadow-sm">
            <div class="card-header bg-light">
                <h5 class="mb-0">
                    <i class="bi bi-plus-circle-dotted me-2"></i>
                    Atanabilecek Özetler
                    <span class="badge bg-secondary ms-1">@Model.AvailableSubmissions.Count</span>
                </h5>
            </div>
            <div class="card-body">
                @if (!Model.AvailableSubmissions.Any())
                {
                    <p class="text-muted">Bu oturuma atanabilecek uygun bir özet bulunmuyor.</p>
                }
                else
                {
                    <ul class="list-group list-group-flush">
                        @foreach (var sub in Model.AvailableSubmissions)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>@sub.Title</strong><br />
                                    <small class="text-muted">Yazar: @sub.Author?.Email</small>
                                </div>
                                <form asp-action="AddToSession" method="post" class="ms-2">
                                    <input type="hidden" name="sessionId" value="@Model.Session.Id" />
                                    <input type="hidden" name="submissionId" value="@sub.SubmissionId" />
                                    <button type="submit" class="btn btn-sm btn-outline-success" title="Oturuma Ekle">
                                        <i class="bi bi-arrow-right-circle"></i> Ekle
                                    </button>
                                </form>
                            </li>
                        }
                    </ul>
                }
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-calendar-check-fill me-2"></i>
                    Bu Oturumdaki Özetler
                    <span class="badge bg-light text-dark ms-1">@Model.AssignedSubmissions.Count</span>
                </h5>
            </div>
            <div class="card-body">
                @if (!Model.AssignedSubmissions.Any())
                {
                    <p class="text-muted">Bu oturuma henüz bir özet atanmamış.</p>
                }
                else
                {
                    <ul class="list-group list-group-flush">
                        @foreach (var sub in Model.AssignedSubmissions)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>@sub.Title</strong><br />
                                    <small class="text-muted">Yazar: @sub.Author?.Email</small>
                                </div>
                                <form asp-action="RemoveFromSession" method="post" class="ms-2">
                                    <input type="hidden" name="sessionId" value="@Model.Session.Id" />
                                    <input type="hidden" name="submissionId" value="@sub.SubmissionId" />
                                    <button type="submit" class="btn btn-sm btn-outline-danger" title="Oturumdan Çıkar">
                                        <i class="bi bi-x-circle"></i> Çıkar
                                    </button>
                                </form>
                            </li>
                        }
                    </ul>
                }
            </div>
        </div>
    </div>
</div>

<div class="mt-4">
    <a asp-action="Index" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Oturum Listesine Geri Dön
    </a>
</div>