@model AntAbstract.Web.Models.ViewModels.DecisionIndexViewModel
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer

@{
    ViewData["Title"] = Localizer["PageTitle"];
}

<h1 class="display-5">@Localizer["PageTitle"]</h1>
<p class="lead text-muted">@Localizer["PageLead"]</p>
<hr />

@if (ViewBag.ErrorMessage != null)
{
    <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
    return;
}

<h3 class="mt-4">@Localizer["AwaitingDecisionHeader"]</h3>
@if (!Model.AwaitingDecision.Any())
{
    <div class="alert alert-info">
        @Localizer["NoAwaitingDecision"]
    </div>
}
else
{
    <table class="table table-hover">
        <thead class="table-light">
            <tr>
                <th>@Localizer["TableHeaderTitle"]</th>
                <th>@Localizer["TableHeaderAuthor"]</th>
                <th>@Localizer["TableHeaderReviewCount"]</th>
                <th style="width: 15%;">@Localizer["TableHeaderActions"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.AwaitingDecision)
            {
                <tr>
                    <td><strong>@item.Title</strong></td>
                    <td>@item.Author.Email</td>
                    <td>@item.ReviewAssignments.Count() @Localizer["ReviewCountText"]</td>
                    <td>
                        <a asp-action="MakeDecision" asp-route-id="@item.SubmissionId" class="btn btn-primary btn-sm">@Localizer["MakeDecisionButton"]</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}


<h3 class="mt-5">@Localizer["DecidedHeader"]</h3>
@if (!Model.AlreadyDecided.Any())
{
    <div class="alert alert-secondary">
        @Localizer["NoDecided"]
    </div>
}
else
{
    <table class="table table-striped table-sm">
        <thead class="table-light">
            <tr>
                <th>@Localizer["TableHeaderTitle"]</th>
                <th>@Localizer["TableHeaderAuthor"]</th>
                <th>@Localizer["TableHeaderFinalDecision"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.AlreadyDecided)
            {
                // Karara göre satır rengini dinamik olarak ayarla
                var rowClass = item.FinalDecision == "Kabul Edildi" ? "table-success"
                : item.FinalDecision == "Reddedildi" ? "table-danger"
                : "table-warning";
                <tr class="@rowClass">
                    <td>@item.Title</td>
                    <td>@item.Author.Email</td>
                    <td><strong>@Localizer[item.FinalDecision]</strong></td>
                </tr>
            }
        </tbody>
    </table>
}